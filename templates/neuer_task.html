{% include "header.jinja2" %}
{% include "navbar.jinja2" %}

<div class="container">
    <h1 class="mt-5">Neuer Task</h1>
    <form action="/save_task" method="POST">
        <div class="form-group">
            <label for="task_name">Task Name:</label>
            <input type="text" class="form-control" name="task_name" id="task_name"
                   placeholder="Bitte gib deinen Task ein" required>
        </div>

        <div class="form-group">
            <label for="deadline">Deadline:</label>
            <div class="input-group date">
                <input type="text" class="form-control" name="deadline" id="deadline" placeholder="Bis wann sollte der Task fertig sein?">
                <div class="input-group-append">
                    <span class="input-group-text"><i class="fa fa-calendar"></i></span>
                </div>
            </div>
        </div>


       <div class="form-group">
    <label for="priority">Priorität:</label>
    <select class="form-control" name="priority" id="priority">
        <option value="tief">Tief</option>
        <option value="medium">Medium</option>
        <option value="hoch">Hoch</option>
    </select>
</div>

        <div class="form-group">
            <label for="list_name">Liste:</label>
            <input type="text" class="form-control" name="list_name" id="list_name"
                   placeholder="Willst du diesen Task zu einer Liste hinzufügen?">
        </div>

        <div class="form-group">
            <label for="category">Kategorie:</label>
            <select class="form-control" name="category" id="category">
                <option value="" selected>Wähle eine Kategorie aus</option>
                {% for category in ["Schule", "Haushalt", "Finanzen", "Familie", "Einkauf", "Sonstiges"] %}
                    <option value="{{ category }}">{{ category }}</option>
                {% endfor %}
                <option value="new_category">Kategorie hinzufügen</option>
            </select>
        </div>

        <div class="form-group" id="new_category" style="display: none;">
            <label for="new_category_name">Name der neuen Kategorie:</label>
            <input type="text" class="form-control" name="new_category_name" id="new_category_name"
                   placeholder="Gib den Namen der neuen Kategorie ein">
            <small id="new_category_help" class="form-text text-muted">Gib den Namen der neuen Kategorie ein.</small>
        </div>

        <input type="submit" value="Eintrag speichern" class="btn btn-primary">
    </form>

     {% if show_task_saved %}
    <!-- Task gespeichert -->
    <h1 class="mt-5">Eintrag gespeichert</h1>
    <div class="card">
      <div class="card-body">
        <h5 class="card-title">{{ task.name }}</h5>
        <p class="card-text">Deadline: {{ task.deadline }}</p>
        <p class="card-text">Priority: {{ task.priority }}</p>
        <p class="card-text">List Name: {{ task.list_name }}</p>
        <p class="card-text">Category: {{ task.category }}</p>
      </div>
    </div>
    <!-- Button um neuen Task hinzufügen -->
    <form action="/neuer_task" method="GET">
      <input type="submit" value="Nochmals einen Task hinzufügen" class="btn btn-primary mt-3">
    </form>
    {% endif %}
  </div>




<div class="container mt-5">
    <h2>Hinzugefügte Tasks</h2>
    <ul class="list-group" id="task-list">
        {% for task in tasks %}
        <li class="list-group-item">
            <h5>{{ task.name }}</h5>
            <p>Deadline: {{ task.deadline }}</p>
            <p>Priority: {{ task.priority }}</p>
            <p>List Name: {{ task.list_name }}</p>
            <p>Category: {{ task.category }}</p>
        </li>
        {% endfor %}
    </ul>
</div>



<style>
    /* CSS-Stile für die hinzugefügten Aufgaben */
    #task-list {
        max-height: 300px;
        overflow-y: auto;
    }
</style>

{% include "footer.jinja2" %} <!-- Footer einbinden -->