{% include "header.jinja2" %}
<!-- Header einbinden -->

{% include "navbar.jinja2" %}
<!-- Navbar einbinden -->

<div class="container">
    <h1 class="mt-5 display-4">Neuer Task</h1>
    <p class="card-text text-muted">Trage hier alle nötigen Infos zu deinen Tasks ein. Je mehr Details du angeben kannst, desto besser wird dein Überblick sein.</p>
    <form action="/save_task" method="POST">
        <div class="form-group">
            <label for="task_name">Task Name:</label>
            <input type="text" class="form-control" name="task_name" id="task_name" placeholder="Bitte gib deinen Task ein." required>
        </div>

        <div class="form-group">
            <label for="deadline">Deadline:</label>
            <div class="input-group date">
                <input type="text" class="form-control" name="deadline" id="deadline" placeholder="Bis wann sollte der Task fertig sein?">
                <div class="input-group-append">
                    <span class="input-group-text"><i class="fa fa-calendar"></i></span>
                </div>
            </div>
        </div>

        <div class="form-group">
            <label for="priority">Priorität:</label>
            <select class="form-control" name="priority" id="priority">
                <option value="" selected>Wähle aus, welche Priorität dieser Task hat.</option>
                <option value="Tief">Tief</option>
                <option value="Medium">Medium</option>
                <option value="Hoch">Hoch</option>
            </select>
        </div>

        <div class="form-group">
            <label for="task_duration">Dauer des Tasks:</label>
            <select class="form-control" name="task_duration" id="task_duration">
                <option value="" selected>Wähle die Dauer des Tasks aus.</option>
                <option value="10">10 Minuten</option>
                <option value="30">30 Minuten</option>
                <option value="120">2 Stunden</option>
                <option value="180">3 Stunden</option>
            </select>
        </div>

        <button type="submit" class="btn btn-primary">Graph generieren</button>

        <div class="form-group">
            <label for="category">Kategorie:</label>
            <select class="form-control" name="category" id="category">
                <option value="" selected>Wähle eine Kategorie aus.</option>
                {% for category in categories %}
                <option value="{{ category }}">{{ category }}</option>
                {% endfor %}
                <option value="new_category">Neue Kategorie hinzufügen</option>
            </select>
        </div>

        {% if category == 'new_category' %}
        <div class="form-group">
            <label for="new_category">Neue Kategorie:</label>
            <input type="text" class="form-control" name="new_category" id="new_category" placeholder="Gib den Namen der neuen Kategorie ein." required>
        </div>
        {% endif %}

        {% if category == 'new_category' %}
        {% include "neue_kategorie.html" %}
        {% endif %}

          <div class="form-group">
              <label for="notes">Sonstige Notizen:</label>
              <textarea class="form-control" name="notes" id="notes" rows="5" placeholder="Hier kannst du Notizen zu deinem Task vermerken."></textarea>
          </div>
        <button type="submit" class="btn btn-primary">Eintrag speichern</button>
    </form>

    {% if show_task_saved %}
    <!-- Task gespeichert -->
    <h1 class="mt-5">Eintrag gespeichert</h1>
    <p class="card-text text-muted">Dein Eintrag wurde gespeichert:</p>
    <div class="card">
        <div class="card-body">
            <h5 class="card-title">{{ task.name }}</h5>
            <p class="card-text">Deadline: {{ task.deadline }}</p>
            <p class="card-text">Priorität: {{ task.priority }}</p>
            <p class="card-text">Kategorie: {{ task.category }}</p>
        </div>
    </div>
    {% endif %}
</div>

{% include "footer.jinja2" %}
<!-- Footer einbinden -->
