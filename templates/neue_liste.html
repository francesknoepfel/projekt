{% include "header.jinja2" %} <!-- Header einbinden -->
{% include "navbar.jinja2" %} <!-- Navigationsleiste einbinden -->

<div class="container mt-5">
    <h1>Neuer Task hinzufügen</h1> <!-- Überschrift "Neuer Task hinzufügen" -->
    <form method="POST" action="/add_task"> <!-- Formular zum Hinzufügen eines Tasks -->
        <div class="form-group">
            <label for="task_name">Task Name:</label> <!-- Label für den Task-Namen -->
            <input type="text" class="form-control" name="task_name" id="task_name"
                   placeholder="Bitte gib deinen Task ein" required> <!-- Textfeld für den Task-Namen -->
        </div>

        <div class="form-group">
            <label for="deadline">Deadline:</label> <!-- Label für die Deadline -->
            <input type="text" class="form-control" name="deadline" id="deadline"
                   placeholder="Bis wann sollte der Task fertig sein?"> <!-- Textfeld für die Deadline -->
        </div>

        <div class="form-group">
            <label for="priority">Priorität:</label> <!-- Label für die Priorität -->
            <input type="text" class="form-control" name="priority" id="priority"
                   placeholder="Bitte gib die Priorität des Tasks an"> <!-- Textfeld für die Priorität -->
        </div>

        <div class="form-group">
            <label for="list_name">Liste:</label> <!-- Label für die Liste -->
            <input type="text" class="form-control" name="list_name" id="list_name"
                   placeholder="Willst du diesen Task zu einer Liste hinzufügen?"> <!-- Textfeld für die Liste -->
        </div>

        <div class="form-group">
            <label for="existing_category">Kategorie</label> <!-- Label für die Kategorie -->
            <input type="text" class="form-control" name="list_name" id="list_name"
                   placeholder="Zu welcher Kategorie ordnest du diesen Task zu?"> <!-- Textfeld für die Kategorie -->
        </div>

        <div class="form-group" id="new_category" style="display: none;"> <!-- Container für die neue Kategorie (anfangs ausgeblendet) -->
            <label for="new_category_name">Kategorie:</label> <!-- Label für den Namen der neuen Kategorie -->
            <select class="form-control" name="new_category_name" id="new_category_name"> <!-- Dropdown-Menü für die neue Kategorie -->
                <option value="" selected>Wähle eine Kategorie aus</option> <!-- Standardoption auswählen -->
                {% for category in ["Schule", "Haushalt", "Finanzen", "Familie", "Einkauf", "Sonstiges"] %}
                    <option value="{{ category }}">{{ category }}</option> <!-- Optionen für vorhandene Kategorien -->
                {% endfor %}
                <option value="new_category">Kategorie hinzufügen</option> <!-- Option zum Hinzufügen einer neuen Kategorie -->
            </select>
        </div>

        <div class="form-group" id="new_category" style="display: none;"> <!-- Container für die neue Kategorie (anfangs ausgeblendet) -->
            <label for="new_category_name">Name der neuen Kategorie:</label> <!-- Label für den Namen der neuen Kategorie -->
            <input type="text" class="form-control" name="new_category_name" id="new_category_name"
                   placeholder="Gib den Namen der neuen Kategorie ein"> <!-- Textfeld für den Namen der neuen Kategorie -->
            <small id="new_category_help" class="form-text text-muted">Gib den Namen der neuen Kategorie ein.</small> <!-- Hilfetext für den Namen der neuen Kategorie -->
        </div>

        <button type="submit" class="btn btn-primary">Speichern</button> <!-- Button zum Speichern des Tasks -->
    </form>
</div>

<div class="container mt-5">
    <h2>Hinzugefügte Tasks</h2> <!-- Überschrift "Hinzugefügte Tasks" -->
    <ul class="list-group" id="task-list"> <!-- Liste für die hinzugefügten Tasks -->
        {% for task in tasks %}
        <li class="list-group-item">
            <h5>{{ task.name }}</h5> <!-- Anzeige des Task-Namens -->
            <p>Deadline: {{ task.deadline }}</p> <!-- Anzeige der Deadline -->
            <p>Priorität: {{ task.priority }}</p> <!-- Anzeige der Priorität -->
            <p>List Name: {{ task.list_name }}</p> <!-- Anzeige des Listen-Namens -->
            <p>Category: {{ task.category }}</p> <!-- Anzeige der Kategorie -->
        </li>
        {% endfor %}
    </ul>
</div>


<style>
    /* CSS-Stile für die Liste der hinzugefügten Tasks */
    #task-list {
        max-height: 300px;
        overflow-y: auto;
    }
</style>

{% include "footer.jinja2" %} <!-- Footer einbinden -->
